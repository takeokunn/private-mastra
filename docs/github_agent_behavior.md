# GitHub Pull Request Reviewer Agent の挙動

このドキュメントは、`pullRequestReviewerAgent` の機能と動作について説明します。

## 概要

`pullRequestReviewerAgent` は、GitHub のプルリクエスト (PR) の品質を評価するために設計された AI アシスタントです。指定されたリポジトリとプルリクエスト番号に基づいて、コードレビューを実行します。

## エージェント名

Pull Request Reviewer Agent

## 目的

GitHub プルリクエストのコードレビューを行い、品質に関するフィードバックを提供します。

## 必要な入力

レビューを開始するには、以下の情報が必要です。

1.  **リポジトリ名:** オーナー名とリポジトリ名を `owner/repo` の形式で指定します (例: `my-org/my-project`)。
2.  **プルリクエスト番号:** レビュー対象のプルリクエストの番号。

## 使用するツール

このエージェントは、以下のツールを利用して情報を収集します。

1.  `getPullRequestDetails`:
    *   **説明:** PR のタイトル、説明、作成者、ベースブランチ、ヘッドブランチなどの詳細情報を取得します。
    *   **入力:** リポジトリ名、プルリクエスト番号。
    *   **出力:** PR の詳細情報を含むオブジェクト。
2.  `getPullRequestDiff`:
    *   **説明:** PR で行われたコードの変更差分 (diff) を取得します。
    *   **入力:** リポジトリ名、プルリクエスト番号。
    *   **出力:** diff 形式の文字列。

**注意:** これらのツールは GitHub API を利用するため、環境変数 `GITHUB_TOKEN` に有効な GitHub Personal Access Token が設定されている必要があります。設定されていない場合、API 呼び出しは失敗する可能性があります。

## 実行フロー

ユーザーからリポジトリ名と PR 番号を指定してレビューを依頼されると、エージェントは以下の手順を実行します。

1.  **詳細取得:** `getPullRequestDetails` ツールを使用して、PR の基本的なコンテキスト情報を取得します。
2.  **差分取得:** `getPullRequestDiff` ツールを使用して、PR のコード変更内容を取得します。
3.  **分析:** 取得した情報（PR の説明、コード差分など）を基に、以下の基準に従って PR を分析します。
    *   **タイトルと説明の明確さ:** PR の目的が明確に記述されているか。
    *   **コード変更の適切性:** コード変更が PR の目的に合致しているか。
    *   **潜在的な問題:** コード差分にバグ、改善の余地、潜在的な問題がないか。
    *   **ベストプラクティス:** 一般的なコーディングのベストプラクティス（可読性、保守性など）に従っているか。
4.  **要約生成:** 分析結果に基づき、PR の長所と短所を強調した簡潔なレビュー要約を作成します。
5.  **応答:** 生成されたレビュー要約をユーザーに返します。特定のコード行に注意が必要な場合は言及しますが、長すぎるコードスニペットは避けます。

## 出力

エージェントは、分析結果に基づいたプルリクエストのレビューサマリーをテキスト形式で提供します。
